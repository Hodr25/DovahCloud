{% extends "base.html" %}
{% block titulo %}ğŸ§ Reproductor{% endblock %}

{% block contenido %}
<h1>ğŸ§ Reproduciendo desde: {{ playlist.nombre }}</h1>

{% if archivo %}
  <h2>{{ archivo.nombre }}</h2>
  <p><strong>Tipo:</strong> {{ archivo.tipo }} | <strong>TamaÃ±o:</strong> {{ archivo.tamaÃ±o | filesizeformat }}</p>

  {% if archivo.tipo.startswith('audio/') %}
    <audio controls autoplay style="width: 100%; max-width: 600px;">
      <source src="/media/{{ archivo.nombre }}" type="{{ archivo.tipo }}">
      Tu navegador no soporta la reproducciÃ³n de audio.
    </audio>
  {% elif archivo.tipo.startswith('video/') %}
    <video controls autoplay width="640" height="360">
      <source src="/media/{{ archivo.nombre }}" type="{{ archivo.tipo }}">
      Tu navegador no soporta la reproducciÃ³n de video.
    </video>
  {% else %}
    <p>Este tipo de archivo no se puede reproducir directamente.</p>
  {% endif %}

  <div style="margin-top: 20px;">
    <form action="{{ url_for('toggle_aleatorio') }}" method="POST" style="display:inline;">
      <button type="submit" title="Mezclar playlist" style="background:none; border:none; font-size:1.2em;">
        {% if estado.modo == 'aleatorio' %}ğŸŸ¢ğŸ”€{% else %}ğŸ”˜ğŸ”€{% endif %}
      </button>
    </form>
    <a href="{{ url_for('anterior_reproductor') }}">â®ï¸ Anterior</a>
    |
    <a href="{{ url_for('siguiente_reproductor') }}">â­ï¸ Siguiente</a>
    |
    <a href="{{ url_for('ver_playlist', id=playlist.id) }}">ğŸ”™ Ver playlist</a>
    |
    <a href="{{ url_for('mi_playlist') }}">ğŸµ Mis playlists</a>
  </div>

  <p style="margin-top: 10px;">
    <strong>Modo:</strong> {{ estado.modo|capitalize }}
    {% if estado.cola %}
      | <strong>En cola:</strong> {{ estado.cola|length }} archivo{{ estado.cola|length > 1 and 's' or '' }}
    {% endif %}
  </p>
{% else %}
  <p>No hay archivo en reproducciÃ³n.</p>
{% endif %}
{% endblock %}
